import{u as z}from"./vendor.2fabef96.js";const $=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const g of i.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}};$();const Y={7:"'\\a'",8:"'\\b'",9:"'\\t'",10:"'\\n'",11:"'\\v'",12:"'\\f'",13:"'\\r'",39:"'\\''",92:"'\\\\'"};function F(A){return Y.hasOwnProperty(A)?Y[A]:32<=A&&A<=126?`'${String.fromCharCode(A)}'`:A<16?`0x0${A.toString(16)}`:`0x${A.toString(16)}`}var C={fonts:{ui:'"IBM Plex Sans", sans-serif',mono:'"Ubuntu Mono", monospace'},colors:{fg:"black",bg:"white",blue:"#4060ff",blue50:"#0000ff80",blue25:"#0000ff40",blue25Opaque:"#c0c0ff",tr:"white",trHover:"#d0d0d0",trZebra:"#e0e0e0",trZebraHover:"#b0b0b0",modalCover:"#00000080",lightGray:"#e0e0e0",buttonBottom:"#00000080",buttonHover:"#00000020",buttonActive:"#00000040"}};function _(A){const e=z.encode(A),t=new Map;t.set(0,1),t.set(255,1);for(let o=0;o<e.length;o+=1){const n=e.charCodeAt(o);t.has(n)?t.set(n,t.get(n)+1):t.set(n,1)}return t}function AA(A,e,t,o){e.replaceChildren();const n=[...A.keys()].sort((i,g)=>A.get(g)-A.get(i));for(const i of n){const g=document.createElement("tr"),s=document.createElement("td"),r=document.createElement("td");g.appendChild(s),g.appendChild(r),s.textContent=F(i),r.textContent=A.get(i).toString();const l=A.get(i)/A.get(n[0]);r.style.boxShadow=`-${l*t}px 0 ${C.colors.blue25} inset`,e.appendChild(g),o&&g.addEventListener("pointerover",()=>o(i),!1)}}var eA=async(A={},e)=>{let t;if(e.startsWith("data:")){const o=atob(e.replace(/^data:.*?base64,/,"")),n=new Uint8Array(o.length);for(let i=0;i<o.length;i++)n[i]=o.charCodeAt(i);t=await WebAssembly.instantiate(n,A)}else{const o=await fetch(e),n=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&n.startsWith("application/wasm"))t=await WebAssembly.instantiateStreaming(o,A);else{const i=await o.arrayBuffer();t=await WebAssembly.instantiate(i,A)}}return t.instance.exports},tA=A=>eA(A,"data:application/wasm;base64,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");function k(A,e){const t=new Uint32Array(A,e,4),o=t[0]?k(A,t[0]):void 0,n=t[1]?k(A,t[1]):void 0,i=t[2],g=t[3];return{left:o,right:n,symbol:i,frequency:g}}const E=56,b=40;async function nA(A){var i;const e=[],t=await tA({env:{save_tree_snapshot(g,s){const r=new Uint32Array(t.memory.buffer,g,s),l=[];for(let I=0;I<s;I+=1)l.push(k(t.memory.buffer,r[I]));e.push(l)}}}),o=t.calloc(256,4),n=new Uint32Array(t.memory.buffer,o,256);for(let g=0;g<256;g+=1)n[g]=(i=A.get(g))!=null?i:0;return t.build_tree(o),e}function u(A){return A.left&&A.right?1+Math.max(u(A.left),u(A.right)):A.left?1+u(A.left):A.right?1+u(A.right):1}function R(A){let e=.5;for(const t in A){const o=A[t],n=2**(-t-2);o==0?e-=n:e+=n}return e}function*p(A,e=[]){A.left&&(yield*p(A.left,[...e,0])),A.right&&(yield*p(A.right,[...e,1])),yield[A,e]}function H(A,e,t){return[R(A)*(e-E-6)+E/2+3,A.length*t+b/2+3]}var M;(function(A){A[A.None=0]="None",A[A.Normal=1]="Normal",A[A.Highlighted=2]="Highlighted"})(M||(M={}));function W(A,e,t,o,n,i=1,g=!1){const[s,r]=H(t,n,o);if(t.length>0&&i!=0){const l=t.slice(0,-1),[I,m]=H(l,n,o);A.beginPath(),[A.strokeStyle,A.lineWidth]=i==2?[C.colors.blue,3]:[C.colors.fg,1],A.moveTo(I,m),A.lineTo(s,r),A.stroke(),A.closePath()}A.beginPath(),[A.fillStyle,A.strokeStyle,A.lineWidth]=g?[C.colors.blue25Opaque,C.colors.blue,3]:[C.colors.bg,C.colors.fg,1],A.rect(s-E/2,r-b/2,E,b),A.fill(),A.stroke(),A.closePath(),A.fillStyle=C.colors.fg,A.font=`16px ${C.fonts.mono}`,A.textBaseline="middle",A.textAlign="center",e.left||e.right?A.fillText(e.frequency.toString(),s,r):(A.fillText(F(e.symbol),s,r-8),A.fillText(e.frequency.toString(),s,r+8))}function iA(A,e){for(const[{symbol:t},o]of p(A))if(t==e)return o}function oA(A,e,t){const o=A.canvas.width/window.devicePixelRatio,n=A.canvas.height/window.devicePixelRatio,i=Math.min((n-b-6)/(u(e)-1),80);let g,s;const r=typeof t=="number"?iA(e,t):void 0;let l=1/0,I=-1/0;for(const[B,w]of p(e)){B.symbol==t&&!B.left&&!B.right&&(g=B,s=w);const O=r?w.every((T,j)=>r[j]==T):!1;W(A,B,w,i,o,O?2:1);const y=R(w);y<l&&(l=y),y>I&&(I=y)}g&&s&&W(A,g,s,i,o,0,!0),l*=o,I*=o;let m=l-E/2-3,D=0,L=I-l+E+6,S=n;return m*=window.devicePixelRatio,D*=window.devicePixelRatio,L*=window.devicePixelRatio,S*=window.devicePixelRatio,{image:A.getImageData(m,D,L,S),rootFrequency:e.frequency}}function gA(A,e,t){const o=e.map(g=>(A.resetTransform(),A.clearRect(0,0,A.canvas.width,A.canvas.height),A.scale(window.devicePixelRatio,window.devicePixelRatio),oA(A,g,t))).sort((g,s)=>g.rootFrequency-s.rootFrequency),n=o.reduce((g,s)=>g+s.image.width,0);A.canvas.width=n,A.canvas.style.width=`${n/window.devicePixelRatio}px`,A.resetTransform(),A.clearRect(0,0,A.canvas.width,A.canvas.height);let i=0;for(const{image:g}of o)A.putImageData(g,i,0),i+=g.width}const Z=document.getElementById("input"),N=document.getElementById("histogram"),f=document.getElementById("huffman"),sA=f.getContext("2d"),d=document.getElementById("scrubber"),h=document.getElementById("howto-container");let Q,a=0;function c(A){const e=f.parentElement.clientWidth,t=f.parentElement.clientHeight;f.width=e*window.devicePixelRatio,f.height=t*window.devicePixelRatio,f.style.width=`${e}px`,f.style.height=`${t}px`,Q&&gA(sA,Q[a],A)}async function J(A){const e=_(Z.value);AA(e,N,A,t=>c(t)),Q=await nA(e),a=Q.length-1,d.max=a.toString(),d.value=a.toString(),c()}const G=document.createElement("tr"),K=document.createElement("td"),rA=document.createElement("td");G.appendChild(K);G.appendChild(rA);N.appendChild(G);const X=K.getClientRects()[0].width;Z.addEventListener("input",()=>J(X),!1);N.addEventListener("pointerout",()=>c(),!1);J(X);window.addEventListener("resize",()=>c(),!1);function U(){a=parseInt(d.value),c()}d.addEventListener("mousemove",U,!1);d.addEventListener("change",U,!1);document.getElementById("close").addEventListener("click",()=>{h.classList.remove("visible")},!1);document.getElementById("dont-show").addEventListener("click",()=>{h.classList.remove("visible"),window.localStorage.setItem("dont-show-howto","true")},!1);document.getElementById("show-howto").addEventListener("click",()=>{h.classList.add("visible"),window.localStorage.removeItem("dont-show-howto")},!1);window.localStorage.getItem("dont-show-howto")||h.classList.add("visible");document.addEventListener("keyup",A=>{A.key=="Escape"&&h.classList.remove("visible")},!1);function q(){a=0,d.value="0",c()}function x(){a=Math.max(0,a-1),d.value=a.toString(),c()}function P(){a=Math.min(Q.length-1,a+1),d.value=a.toString(),c()}function V(){a=Q.length-1,d.value=a.toString(),c()}function v(A,e){(e.key=="Enter"||e.key==" ")&&A()}document.getElementById("to-start").addEventListener("click",q,!1);document.getElementById("to-start").addEventListener("keypress",v.bind(null,q),!1);document.getElementById("step-back").addEventListener("click",x,!1);document.getElementById("step-back").addEventListener("keypress",v.bind(null,x),!1);document.getElementById("step-forward").addEventListener("click",P,!1);document.getElementById("step-forward").addEventListener("keypress",v.bind(null,P),!1);document.getElementById("to-end").addEventListener("click",V,!1);document.getElementById("to-end").addEventListener("keypress",v.bind(null,V),!1);

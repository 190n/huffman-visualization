import{u as z}from"./vendor.2fabef96.js";const $=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function A(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=A(n);fetch(n.href,i)}};$();const F={7:"'\\a'",8:"'\\b'",9:"'\\t'",10:"'\\n'",11:"'\\v'",12:"'\\f'",13:"'\\r'",39:"'\\''",92:"'\\\\'"};function K(e){return F.hasOwnProperty(e)?F[e]:32<=e&&e<=126?`'${String.fromCharCode(e)}'`:e<16?`0x0${e.toString(16)}`:`0x${e.toString(16)}`}var c={fonts:{ui:'"IBM Plex Sans", sans-serif',mono:'"Ubuntu Mono", monospace'},colors:{fg:"black",bg:"white",blue:"#4060ff",blue50:"#0000ff80",blue25:"#0000ff40",blue25Opaque:"#c0c0ff",tr:"white",trHover:"#d0d0d0",trZebra:"#e0e0e0",trZebraHover:"#b0b0b0",modalCover:"#00000080",lightGray:"#e0e0e0",buttonBottom:"#00000080",buttonHover:"#00000020",buttonActive:"#00000040"}};function _(e){const t=z.encode(e),A=new Map;A.set(0,1),A.set(255,1);for(let o=0;o<t.length;o+=1){const n=t.charCodeAt(o);A.has(n)?A.set(n,A.get(n)+1):A.set(n,1)}return A}function ee(e,t,A,o){t.replaceChildren();const n=[...e.keys()].sort((i,s)=>e.get(s)-e.get(i));for(const i of n){const s=document.createElement("tr"),r=document.createElement("td"),a=document.createElement("td");s.appendChild(r),s.appendChild(a),r.textContent=K(i),a.textContent=e.get(i).toString();const g=e.get(i)/e.get(n[0]);a.style.boxShadow=`-${g*A}px 0 ${c.colors.blue25} inset`,t.appendChild(s),o&&s.addEventListener("pointerover",()=>o(i),!1)}}var te=async(e={},t)=>{let A;if(t.startsWith("data:")){const o=atob(t.replace(/^data:.*?base64,/,"")),n=new Uint8Array(o.length);for(let i=0;i<o.length;i++)n[i]=o.charCodeAt(i);A=await WebAssembly.instantiate(n,e)}else{const o=await fetch(t),n=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&n.startsWith("application/wasm"))A=await WebAssembly.instantiateStreaming(o,e);else{const i=await o.arrayBuffer();A=await WebAssembly.instantiate(i,e)}}return A.instance.exports},Ae=e=>te(e,"data:application/wasm;base64,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");function D(e,t){const A=new Uint32Array(e,t,4),o=A[0]?D(e,A[0]):void 0,n=A[1]?D(e,A[1]):void 0,i=A[2],s=A[3];return{left:o,right:n,symbol:i,frequency:s}}const u=56,p=40;async function ne(e){var i;const t=[],A=await Ae({env:{save_tree_snapshot(s,r){const a=new Uint32Array(A.memory.buffer,s,r),g=[];for(let d=0;d<r;d+=1)g.push(D(A.memory.buffer,a[d]));t.push(g)}}}),o=A.calloc(256,4),n=new Uint32Array(A.memory.buffer,o,256);for(let s=0;s<256;s+=1)n[s]=(i=e.get(s))!=null?i:0;return A.build_tree(o),t}function E(e){return e.left&&e.right?1+Math.max(E(e.left),E(e.right)):e.left?1+E(e.left):e.right?1+E(e.right):1}function R(e){let t=.5;for(const A in e){const o=e[A],n=2**(-A-2);o==0?t-=n:t+=n}return t}function*v(e,t=[]){e.left&&(yield*v(e.left,[...t,0])),e.right&&(yield*v(e.right,[...t,1])),yield[e,t]}function Y(e,t,A){return[R(e)*(t-u-6)+u/2+3,e.length*A+p/2+3]}var W;(function(e){e[e.None=0]="None",e[e.Normal=1]="Normal",e[e.Highlighted=2]="Highlighted"})(W||(W={}));function q(e,t,A,o,n,i=1,s=!1){const[r,a]=Y(A,n,o);if(A.length>0&&i!=0){const g=A.slice(0,-1),[d,w]=Y(g,n,o);e.beginPath(),[e.strokeStyle,e.lineWidth]=i==2?[c.colors.blue,3]:[c.colors.fg,1],e.moveTo(d,w),e.lineTo(r,a),e.stroke(),e.closePath()}e.beginPath(),[e.fillStyle,e.strokeStyle,e.lineWidth]=s?[c.colors.blue25Opaque,c.colors.blue,3]:[c.colors.bg,c.colors.fg,1],e.rect(r-u/2,a-p/2,u,p),e.fill(),e.stroke(),e.closePath(),e.fillStyle=c.colors.fg,e.font=`16px ${c.fonts.mono}`,e.textBaseline="middle",e.textAlign="center",t.left||t.right?e.fillText(t.frequency.toString(),r,a):(e.fillText(K(t.symbol),r,a-8),e.fillText(t.frequency.toString(),r,a+8))}function ie(e,t){for(const[{symbol:A},o]of v(e))if(A==t)return o}function oe(e,t,A){const o=e.canvas.width/window.devicePixelRatio,n=e.canvas.height/window.devicePixelRatio,i=Math.min((n-p-6)/(E(t)-1),80);let s,r;const a=typeof A=="number"?ie(t,A):void 0;let g=1/0,d=-1/0;for(const[B,y]of v(t)){B.symbol==A&&!B.left&&!B.right&&(s=B,r=y);const x=a?y.every((V,U)=>a[U]==V):!1;q(e,B,y,i,o,x?2:1);const Q=R(y);Q<g&&(g=Q),Q>d&&(d=Q)}s&&r&&q(e,s,r,i,o,0,!0),g*=o,d*=o;let w=g-u/2-3,S=0,N=d-g+u+6,M=n;return w*=window.devicePixelRatio,S*=window.devicePixelRatio,N*=window.devicePixelRatio,M*=window.devicePixelRatio,{image:e.getImageData(w,S,N,M),rootFrequency:t.frequency}}function se(e,t,A){const o=t.map(s=>(e.resetTransform(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.scale(window.devicePixelRatio,window.devicePixelRatio),oe(e,s,A))).sort((s,r)=>s.rootFrequency-r.rootFrequency),n=o.reduce((s,r)=>s+r.image.width,0);e.canvas.width=n,e.canvas.style.width=`${n/window.devicePixelRatio}px`,e.resetTransform(),e.clearRect(0,0,e.canvas.width,e.canvas.height);let i=0;for(const{image:s}of o)e.putImageData(s,i,0),i+=s.width}const G=document.getElementById("input"),k=document.getElementById("histogram"),C=document.getElementById("huffman"),re=C.getContext("2d"),I=document.getElementById("scrubber"),m=document.getElementById("howto-container");let h,l=0;function f(e){const t=C.parentElement.clientWidth,A=C.parentElement.clientHeight;C.width=t*window.devicePixelRatio,C.height=A*window.devicePixelRatio,C.style.width=`${t}px`,C.style.height=`${A}px`,h&&se(re,h[l],e)}async function J(e){const t=_(G.value);ee(t,k,e,A=>f(A)),h=await ne(t),l=h.length-1,I.max=l.toString(),I.value=l.toString(),f()}const L=document.createElement("tr"),H=document.createElement("td"),ae=document.createElement("td");L.appendChild(H);L.appendChild(ae);k.appendChild(L);const P=H.getClientRects()[0].width;G.addEventListener("input",()=>J(P),!1);k.addEventListener("pointerout",()=>f(),!1);J(P);window.addEventListener("resize",()=>f(),!1);function T(){l=parseInt(I.value),f()}I.addEventListener("mousemove",T,!1);I.addEventListener("change",T,!1);document.getElementById("close").addEventListener("click",()=>{m.classList.remove("visible")},!1);document.getElementById("dont-show").addEventListener("click",()=>{m.classList.remove("visible"),window.localStorage.setItem("dont-show-howto","true")},!1);document.getElementById("show-howto").addEventListener("click",()=>{m.classList.add("visible"),window.localStorage.removeItem("dont-show-howto")},!1);window.localStorage.getItem("dont-show-howto")||m.classList.add("visible");document.addEventListener("keyup",e=>{e.key=="Escape"&&m.classList.remove("visible")},!1);function X(){l=0,I.value="0",f()}function Z(){l=Math.max(0,l-1),I.value=l.toString(),f()}function j(){l=Math.min(h.length-1,l+1),I.value=l.toString(),f()}function O(){l=h.length-1,I.value=l.toString(),f()}function b(e,t){(t.key=="Enter"||t.key==" ")&&e()}document.getElementById("to-start").addEventListener("click",X,!1);document.getElementById("to-start").addEventListener("keypress",b.bind(null,X),!1);document.getElementById("step-back").addEventListener("click",Z,!1);document.getElementById("step-back").addEventListener("keypress",b.bind(null,Z),!1);document.getElementById("step-forward").addEventListener("click",j,!1);document.getElementById("step-forward").addEventListener("keypress",b.bind(null,j),!1);document.getElementById("to-end").addEventListener("click",O,!1);document.getElementById("to-end").addEventListener("keypress",b.bind(null,O),!1);

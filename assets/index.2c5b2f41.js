import{u as j}from"./vendor.2fabef96.js";const O=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function A(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(i){if(i.ep)return;i.ep=!0;const n=A(i);fetch(i.href,n)}};O();const F={7:"'\\a'",8:"'\\b'",9:"'\\t'",10:"'\\n'",11:"'\\v'",12:"'\\f'",13:"'\\r'",39:"'\\''",92:"'\\\\'"};function L(e){return F.hasOwnProperty(e)?F[e]:32<=e&&e<=126?`'${String.fromCharCode(e)}'`:e<16?`0x0${e.toString(16)}`:`0x${e.toString(16)}`}var d={fonts:{ui:'"IBM Plex Sans", sans-serif',mono:'"Ubuntu Mono", monospace'},colors:{fg:"black",bg:"white",blue:"#4060ff",blue50:"#0000ff80",blue25:"#0000ff40",blue25Opaque:"#c0c0ff",tr:"white",trHover:"#d0d0d0",trZebra:"#e0e0e0",trZebraHover:"#b0b0b0",modalCover:"#00000080",lightGray:"#e0e0e0",buttonBottom:"#00000080",buttonHover:"#00000020",buttonActive:"#00000040"}};function z(e){const t=j.encode(e),A=new Map;A.set(0,1),A.set(255,1);for(let o=0;o<t.length;o+=1){const i=t.charCodeAt(o);A.has(i)?A.set(i,A.get(i)+1):A.set(i,1)}return A}function U(e,t,A,o){t.replaceChildren();const i=[...e.keys()].sort((n,s)=>e.get(s)-e.get(n));for(const n of i){const s=document.createElement("tr"),r=document.createElement("td"),g=document.createElement("td");s.appendChild(r),s.appendChild(g),r.textContent=L(n),g.textContent=e.get(n).toString();const a=e.get(n)/e.get(i[0]);g.style.boxShadow=`-${a*A}px 0 ${d.colors.blue25} inset`,t.appendChild(s),o&&s.addEventListener("pointerover",()=>o(n),!1)}}var V=async(e={},t)=>{let A;if(t.startsWith("data:")){const o=atob(t.replace(/^data:.*?base64,/,"")),i=new Uint8Array(o.length);for(let n=0;n<o.length;n++)i[n]=o.charCodeAt(n);A=await WebAssembly.instantiate(i,e)}else{const o=await fetch(t),i=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&i.startsWith("application/wasm"))A=await WebAssembly.instantiateStreaming(o,e);else{const n=await o.arrayBuffer();A=await WebAssembly.instantiate(n,e)}}return A.instance.exports},$=e=>V(e,"data:application/wasm;base64,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");function b(e,t){const A=new Uint32Array(e,t,4),o=A[0]?b(e,A[0]):void 0,i=A[1]?b(e,A[1]):void 0,n=A[2],s=A[3];return{left:o,right:i,symbol:n,frequency:s}}const c=56,m=40;async function x(e){var n;const t=[],A=await $({env:{save_tree_snapshot(s,r){const g=new Uint32Array(A.memory.buffer,s,r),a=[];for(let l=0;l<r;l+=1)a.push(b(A.memory.buffer,g[l]));t.push(a)}}}),o=A.calloc(256,4),i=new Uint32Array(A.memory.buffer,o,256);for(let s=0;s<256;s+=1)i[s]=(n=e.get(s))!=null?n:0;return A.build_tree(o),t}function f(e){return e.left&&e.right?1+Math.max(f(e.left),f(e.right)):e.left?1+f(e.left):e.right?1+f(e.right):1}function J(e){let t=.5;for(const A in e){const o=e[A],i=2**(-A-2);o==0?t-=i:t+=i}return t}function*y(e,t=[]){e.left&&(yield*y(e.left,[...t,0])),e.right&&(yield*y(e.right,[...t,1])),yield[e,t]}function q(e,t,A){return[J(e)*(t-c-6)+c/2+3,e.length*A+m/2+3]}var K;(function(e){e[e.None=0]="None",e[e.Normal=1]="Normal",e[e.Highlighted=2]="Highlighted"})(K||(K={}));function W(e,t,A,o,i,n=1,s=!1){const[r,g]=q(A,i,o);if(A.length>0&&n!=0){const a=A.slice(0,-1),[l,B]=q(a,i,o);e.beginPath(),[e.strokeStyle,e.lineWidth]=n==2?[d.colors.blue,3]:[d.colors.fg,1],e.moveTo(l,B),e.lineTo(r,g),e.stroke(),e.closePath()}e.beginPath(),[e.fillStyle,e.strokeStyle,e.lineWidth]=s?[d.colors.blue25Opaque,d.colors.blue,3]:[d.colors.bg,d.colors.fg,1],e.rect(r-c/2,g-m/2,c,m),e.fill(),e.stroke(),e.closePath(),e.fillStyle=d.colors.fg,e.font=`16px ${d.fonts.mono}`,e.textBaseline="middle",e.textAlign="center",t.left||t.right?e.fillText(t.frequency.toString(),r,g):(e.fillText(L(t.symbol),r,g-8),e.fillText(t.frequency.toString(),r,g+8))}function _(e,t){for(const[{symbol:A},o]of y(e))if(A==t)return o}function ee(e,t,A){const o=e.canvas.width/window.devicePixelRatio,i=e.canvas.height/window.devicePixelRatio,n=Math.min((i-m-6)/(f(t)-1),80);let s,r;const g=typeof A=="number"?_(t,A):void 0;let a=1/0,l=-1/0;for(const[C,w]of y(t)){C.symbol==A&&!C.left&&!C.right&&(s=C,r=w);const T=g?w.every((X,Z)=>g[Z]==X):!1;W(e,C,w,n,o,T?2:1);const Q=J(w);Q<a&&(a=Q),Q>l&&(l=Q)}s&&r&&W(e,s,r,n,o,0,!0),a*=o,l*=o;let B=a-c/2-3,S=0,R=l-a+c+6,k=i;return B*=window.devicePixelRatio,S*=window.devicePixelRatio,R*=window.devicePixelRatio,k*=window.devicePixelRatio,{image:e.getImageData(B,S,R,k),rootFrequency:t.frequency}}function Ae(e,t,A){const o=t.map(s=>(e.resetTransform(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.scale(window.devicePixelRatio,window.devicePixelRatio),ee(e,s,A))).sort((s,r)=>s.rootFrequency-r.rootFrequency),i=o.reduce((s,r)=>s+r.image.width,0);e.canvas.width=i,e.canvas.style.width=`${i/window.devicePixelRatio}px`,e.resetTransform(),e.clearRect(0,0,e.canvas.width,e.canvas.height);let n=0;for(const{image:s}of o)e.putImageData(s,n,0),n+=s.width}const Y=document.getElementById("input"),N=document.getElementById("histogram"),I=document.getElementById("huffman"),te=I.getContext("2d"),u=document.getElementById("scrubber"),p=document.getElementById("howto-container");let v,h=0;function E(e){const t=I.parentElement.clientWidth,A=I.parentElement.clientHeight;I.width=t*window.devicePixelRatio,I.height=A*window.devicePixelRatio,I.style.width=`${t}px`,I.style.height=`${A}px`,v&&Ae(te,v[h],e)}async function G(e){const t=z(Y.value);U(t,N,e,A=>E(A)),v=await x(t),h=v.length-1,u.max=h.toString(),u.value=h.toString(),E()}const D=document.createElement("tr"),M=document.createElement("td"),ie=document.createElement("td");D.appendChild(M);D.appendChild(ie);N.appendChild(D);const H=M.getClientRects()[0].width;Y.addEventListener("input",()=>G(H),!1);N.addEventListener("pointerout",()=>E(),!1);G(H);window.addEventListener("resize",()=>E(),!1);function P(){h=parseInt(u.value),E()}u.addEventListener("mousemove",P,!1);u.addEventListener("change",P,!1);document.getElementById("close").addEventListener("click",()=>{p.classList.remove("visible")},!1);document.getElementById("dont-show").addEventListener("click",()=>{p.classList.remove("visible"),window.localStorage.setItem("dont-show-howto","true")},!1);document.getElementById("show-howto").addEventListener("click",()=>{p.classList.add("visible"),window.localStorage.removeItem("dont-show-howto")},!1);window.localStorage.getItem("dont-show-howto")||p.classList.add("visible");

import{u as z}from"./vendor.2fabef96.js";const V=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))g(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&g(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function g(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}};V();const R={7:"'\\a'",8:"'\\b'",9:"'\\t'",10:"'\\n'",11:"'\\v'",12:"'\\f'",13:"'\\r'",39:"'\\''",92:"'\\\\'"};function J(A){return R.hasOwnProperty(A)?R[A]:32<=A&&A<=126?`'${String.fromCharCode(A)}'`:A<16?`0x0${A.toString(16)}`:`0x${A.toString(16)}`}var d={fonts:{ui:'"IBM Plex Sans", sans-serif',mono:'"Ubuntu Mono", monospace'},colors:{fg:"black",bg:"white",blue:"#4060ff",blue50:"#0000ff80",blue25:"#0000ff40",blue25Opaque:"#c0c0ff",tr:"white",trHover:"#d0d0d0",trZebra:"#e0e0e0",trZebraHover:"#b0b0b0",modalCover:"#00000080",lightGray:"#e0e0e0",buttonBottom:"#00000080",buttonHover:"#00000020",buttonActive:"#00000040"}};function _(A){const e=z.encode(A),t=new Map;t.set(0,1),t.set(255,1);for(let g=0;g<e.length;g+=1){const n=e.charCodeAt(g);t.has(n)?t.set(n,t.get(n)+1):t.set(n,1)}return t}function AA(A,e,t,g){e.replaceChildren();const n=[...A.keys()].sort((i,o)=>A.get(o)-A.get(i));for(const i of n){const o=document.createElement("tr"),s=document.createElement("td"),r=document.createElement("td");o.appendChild(s),o.appendChild(r),s.textContent=J(i),r.textContent=A.get(i).toString();const a=A.get(i)/A.get(n[0]);r.style.boxShadow=`-${a*t}px 0 ${d.colors.blue25} inset`,e.appendChild(o),g&&o.addEventListener("pointerover",()=>g(i),!1)}}var eA=async(A={},e)=>{let t;if(e.startsWith("data:")){const g=atob(e.replace(/^data:.*?base64,/,"")),n=new Uint8Array(g.length);for(let i=0;i<g.length;i++)n[i]=g.charCodeAt(i);t=await WebAssembly.instantiate(n,A)}else{const g=await fetch(e),n=g.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&n.startsWith("application/wasm"))t=await WebAssembly.instantiateStreaming(g,A);else{const i=await g.arrayBuffer();t=await WebAssembly.instantiate(i,A)}}return t.instance.exports},tA=A=>eA(A,"data:application/wasm;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAAAAAAIAQBAAAEAQAAAAAAAAAAAABBoIgECwwAAAAALAQBAAAAAQA=");function b(A,e){const t=new Uint32Array(A,e,4),g=t[0]?b(A,t[0]):void 0,n=t[1]?b(A,t[1]):void 0,i=t[2]&255,o=t[3];return{left:g,right:n,symbol:i,frequency:o}}const c=56,v=40;async function nA(A){var i;const e=[],t=await tA({env:{saveTreeSnapshot(o,s){const r=new Uint32Array(t.memory.buffer,o,s),a=[];for(let l=0;l<s;l+=1)a.push(b(t.memory.buffer,r[l]));e.push(a)}}}),g=t.histogram.value,n=new Uint32Array(t.memory.buffer,g,256);for(let o=0;o<256;o+=1)n[o]=(i=A.get(o))!=null?i:0;return t.buildTree(g),e}function u(A){return A.left&&A.right?1+Math.max(u(A.left),u(A.right)):A.left?1+u(A.left):A.right?1+u(A.right):1}function M(A){let e=.5;for(const t in A){const g=A[t],n=2**(-t-2);g==0?e-=n:e+=n}return e}function*p(A,e=[]){A.left&&(yield*p(A.left,[...e,0])),A.right&&(yield*p(A.right,[...e,1])),yield[A,e]}function G(A,e,t){return[M(A)*(e-c-6)+c/2+3,A.length*t+v/2+3]}var K;(function(A){A[A.None=0]="None",A[A.Normal=1]="Normal",A[A.Highlighted=2]="Highlighted"})(K||(K={}));function H(A,e,t,g,n,i=1,o=!1){const[s,r]=G(t,n,g);if(t.length>0&&i!=0){const a=t.slice(0,-1),[l,w]=G(a,n,g);A.beginPath(),[A.strokeStyle,A.lineWidth]=i==2?[d.colors.blue,3]:[d.colors.fg,1],A.moveTo(l,w),A.lineTo(s,r),A.stroke(),A.closePath()}A.beginPath(),[A.fillStyle,A.strokeStyle,A.lineWidth]=o?[d.colors.blue25Opaque,d.colors.blue,3]:[d.colors.bg,d.colors.fg,1],A.rect(s-c/2,r-v/2,c,v),A.fill(),A.stroke(),A.closePath(),A.fillStyle=d.colors.fg,A.font=`16px ${d.fonts.mono}`,A.textBaseline="middle",A.textAlign="center",e.left||e.right?A.fillText(e.frequency.toString(),s,r):(A.fillText(J(e.symbol),s,r-8),A.fillText(e.frequency.toString(),s,r+8))}function iA(A,e){for(const[{symbol:t},g]of p(A))if(t==e)return g}function gA(A,e,t){const g=A.canvas.width/window.devicePixelRatio,n=A.canvas.height/window.devicePixelRatio,i=Math.min((n-v-6)/(u(e)-1),80);let o,s;const r=typeof t=="number"?iA(e,t):void 0;let a=1/0,l=-1/0;for(const[Q,m]of p(e)){Q.symbol==t&&!Q.left&&!Q.right&&(o=Q,s=m);const x=r?m.every(($,j)=>r[j]==$):!1;H(A,Q,m,i,g,x?2:1);const y=M(m);y<a&&(a=y),y>l&&(l=y)}o&&s&&H(A,o,s,i,g,0,!0),a*=g,l*=g;let w=a-c/2-3,k=0,N=l-a+c+6,F=n;return w*=window.devicePixelRatio,k*=window.devicePixelRatio,N*=window.devicePixelRatio,F*=window.devicePixelRatio,{image:A.getImageData(w,k,N,F),rootFrequency:e.frequency}}function oA(A,e,t){const g=e.map(o=>(A.resetTransform(),A.clearRect(0,0,A.canvas.width,A.canvas.height),A.scale(window.devicePixelRatio,window.devicePixelRatio),gA(A,o,t))).sort((o,s)=>o.rootFrequency-s.rootFrequency),n=g.reduce((o,s)=>o+s.image.width,0);A.canvas.width=n,A.canvas.style.width=`${n/window.devicePixelRatio}px`,A.resetTransform(),A.clearRect(0,0,A.canvas.width,A.canvas.height);let i=0;for(const{image:o}of g)A.putImageData(o,i,0),i+=o.width}const Y=document.getElementById("input"),L=document.getElementById("histogram"),E=document.getElementById("huffman"),sA=E.getContext("2d"),C=document.getElementById("scrubber"),h=document.getElementById("howto-container");let f,I=0;function B(A){const e=E.parentElement.clientWidth,t=E.parentElement.clientHeight;E.width=e*window.devicePixelRatio,E.height=t*window.devicePixelRatio,E.style.width=`${e}px`,E.style.height=`${t}px`,f&&oA(sA,f[I],A)}async function q(A){const e=_(Y.value);AA(e,L,A,t=>B(t)),f=await nA(e),I=f.length-1,C.max=I.toString(),C.value=I.toString(),B()}const S=document.createElement("tr"),U=document.createElement("td"),rA=document.createElement("td");S.appendChild(U);S.appendChild(rA);L.appendChild(S);const P=U.getClientRects()[0].width;Y.addEventListener("input",()=>q(P),!1);L.addEventListener("pointerout",()=>B(),!1);q(P);window.addEventListener("resize",()=>B(),!1);function T(){I=parseInt(C.value),B()}C.addEventListener("mousemove",T,!1);C.addEventListener("change",T,!1);document.getElementById("close").addEventListener("click",()=>{h.classList.remove("visible")},!1);document.getElementById("dont-show").addEventListener("click",()=>{h.classList.remove("visible"),window.localStorage.setItem("dont-show-howto","true")},!1);document.getElementById("show-howto").addEventListener("click",()=>{h.classList.add("visible"),window.localStorage.removeItem("dont-show-howto")},!1);window.localStorage.getItem("dont-show-howto")||h.classList.add("visible");document.addEventListener("keyup",A=>{A.key=="Escape"&&h.classList.remove("visible")},!1);function W(){I=0,C.value="0",B()}function O(){I=Math.max(0,I-1),C.value=I.toString(),B()}function X(){I=Math.min(f.length-1,I+1),C.value=I.toString(),B()}function Z(){I=f.length-1,C.value=I.toString(),B()}function D(A,e){(e.key=="Enter"||e.key==" ")&&A()}document.getElementById("to-start").addEventListener("click",W,!1);document.getElementById("to-start").addEventListener("keypress",D.bind(null,W),!1);document.getElementById("step-back").addEventListener("click",O,!1);document.getElementById("step-back").addEventListener("keypress",D.bind(null,O),!1);document.getElementById("step-forward").addEventListener("click",X,!1);document.getElementById("step-forward").addEventListener("keypress",D.bind(null,X),!1);document.getElementById("to-end").addEventListener("click",Z,!1);document.getElementById("to-end").addEventListener("keypress",D.bind(null,Z),!1);

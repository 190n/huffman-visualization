import{u as $}from"./vendor.2fabef96.js";const j=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function A(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=A(n);fetch(n.href,i)}};j();const F={7:"'\\a'",8:"'\\b'",9:"'\\t'",10:"'\\n'",11:"'\\v'",12:"'\\f'",13:"'\\r'",39:"'\\''",92:"'\\\\'"};function M(e){return F.hasOwnProperty(e)?F[e]:32<=e&&e<=126?`'${String.fromCharCode(e)}'`:e<16?`0x0${e.toString(16)}`:`0x${e.toString(16)}`}var c={fonts:{ui:'"IBM Plex Sans", sans-serif',mono:'"Ubuntu Mono", monospace'},colors:{fg:"black",bg:"white",blue:"#4060ff",blue50:"#0000ff80",blue25:"#0000ff40",blue25Opaque:"#c0c0ff",tr:"white",trHover:"#d0d0d0",trZebra:"#e0e0e0",trZebraHover:"#b0b0b0",modalCover:"#00000080",lightGray:"#e0e0e0",buttonBottom:"#00000080",buttonHover:"#00000020",buttonActive:"#00000040"}};function _(e){const t=$.encode(e),A=new Map;A.set(0,1),A.set(255,1);for(let o=0;o<t.length;o+=1){const n=t.charCodeAt(o);A.has(n)?A.set(n,A.get(n)+1):A.set(n,1)}return A}function ee(e,t,A,o){t.replaceChildren();const n=[...e.keys()].sort((i,s)=>e.get(s)-e.get(i));for(const i of n){const s=document.createElement("tr"),r=document.createElement("td"),a=document.createElement("td");s.appendChild(r),s.appendChild(a),r.textContent=M(i),a.textContent=e.get(i).toString();const l=e.get(i)/e.get(n[0]);a.style.boxShadow=`-${l*A}px 0 ${c.colors.blue25} inset`,t.appendChild(s),o&&s.addEventListener("pointerover",()=>o(i),!1)}}var te=async(e={},t)=>{let A;if(t.startsWith("data:")){const o=atob(t.replace(/^data:.*?base64,/,"")),n=new Uint8Array(o.length);for(let i=0;i<o.length;i++)n[i]=o.charCodeAt(i);A=await WebAssembly.instantiate(n,e)}else{const o=await fetch(t),n=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&n.startsWith("application/wasm"))A=await WebAssembly.instantiateStreaming(o,e);else{const i=await o.arrayBuffer();A=await WebAssembly.instantiate(i,e)}}return A.instance.exports},Ae=e=>te(e,"data:application/wasm;base64,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");function S(e,t){const A=new Uint32Array(e,t,4),o=A[0]?S(e,A[0]):void 0,n=A[1]?S(e,A[1]):void 0,i=A[2],s=A[3];return{left:o,right:n,symbol:i,frequency:s}}const u=56,p=40;async function ne(e){var i;const t=[],A=await Ae({env:{save_tree_snapshot(s,r){const a=new Uint32Array(A.memory.buffer,s,r),l=[];for(let d=0;d<r;d+=1)l.push(S(A.memory.buffer,a[d]));t.push(l)}}}),o=A.calloc(256,4),n=new Uint32Array(A.memory.buffer,o,256);for(let s=0;s<256;s+=1)n[s]=(i=e.get(s))!=null?i:0;return A.build_tree(o),t}function m(e){return e.left&&e.right?1+Math.max(m(e.left),m(e.right)):e.left?1+m(e.left):e.right?1+m(e.right):1}function q(e){let t=.5;for(const A in e){const o=e[A],n=2**(-A-2);o==0?t-=n:t+=n}return t}function*v(e,t=[]){e.left&&(yield*v(e.left,[...t,0])),e.right&&(yield*v(e.right,[...t,1])),yield[e,t]}function Y(e,t,A){return[q(e)*(t-u-6)+u/2+3,e.length*A+p/2+3]}var J;(function(e){e[e.None=0]="None",e[e.Normal=1]="Normal",e[e.Highlighted=2]="Highlighted"})(J||(J={}));function R(e,t,A,o,n,i=1,s=!1){const[r,a]=Y(A,n,o);if(A.length>0&&i!=0){const l=A.slice(0,-1),[d,w]=Y(l,n,o);e.beginPath(),[e.strokeStyle,e.lineWidth]=i==2?[c.colors.blue,3]:[c.colors.fg,1],e.moveTo(d,w),e.lineTo(r,a),e.stroke(),e.closePath()}e.beginPath(),[e.fillStyle,e.strokeStyle,e.lineWidth]=s?[c.colors.blue25Opaque,c.colors.blue,3]:[c.colors.bg,c.colors.fg,1],e.rect(r-u/2,a-p/2,u,p),e.fill(),e.stroke(),e.closePath(),e.fillStyle=c.colors.fg,e.font=`16px ${c.fonts.mono}`,e.textBaseline="middle",e.textAlign="center",t.left||t.right?e.fillText(t.frequency.toString(),r,a):(e.fillText(M(t.symbol),r,a-8),e.fillText(t.frequency.toString(),r,a+8))}function ie(e,t){for(const[{symbol:A},o]of v(e))if(A==t)return o}function oe(e,t,A){const o=e.canvas.width/window.devicePixelRatio,n=e.canvas.height/window.devicePixelRatio,i=Math.min((n-p-6)/(m(t)-1),80);let s,r;const a=typeof A=="number"?ie(t,A):void 0;let l=1/0,d=-1/0;for(const[h,y]of v(t)){h.symbol==A&&!h.left&&!h.right&&(s=h,r=y);const x=a?y.every((z,O)=>a[O]==z):!1;R(e,h,y,i,o,x?2:1);const Q=q(y);Q<l&&(l=Q),Q>d&&(d=Q)}s&&r&&R(e,s,r,i,o,0,!0),l*=o,d*=o;let w=l-u/2-3,D=0,K=d-l+u+6,L=n;return w*=window.devicePixelRatio,D*=window.devicePixelRatio,K*=window.devicePixelRatio,L*=window.devicePixelRatio,{image:e.getImageData(w,D,K,L),rootFrequency:t.frequency}}function se(e,t,A){const o=t.map(s=>(e.resetTransform(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.scale(window.devicePixelRatio,window.devicePixelRatio),oe(e,s,A))).sort((s,r)=>s.rootFrequency-r.rootFrequency),n=o.reduce((s,r)=>s+r.image.width,0);e.canvas.width=n,e.canvas.style.width=`${n/window.devicePixelRatio}px`,e.resetTransform(),e.clearRect(0,0,e.canvas.width,e.canvas.height);let i=0;for(const{image:s}of o)e.putImageData(s,i,0),i+=s.width}const H=document.getElementById("input"),k=document.getElementById("histogram"),f=document.getElementById("huffman"),re=f.getContext("2d"),I=document.getElementById("scrubber"),B=document.getElementById("howto-container");let E,g=0;function C(e){const t=f.parentElement.clientWidth,A=f.parentElement.clientHeight;f.width=t*window.devicePixelRatio,f.height=A*window.devicePixelRatio,f.style.width=`${t}px`,f.style.height=`${A}px`,E&&se(re,E[g],e)}async function W(e){const t=_(H.value);ee(t,k,e,A=>C(A)),E=await ne(t),g=E.length-1,I.max=g.toString(),I.value=g.toString(),C()}const N=document.createElement("tr"),P=document.createElement("td"),ae=document.createElement("td");N.appendChild(P);N.appendChild(ae);k.appendChild(N);const X=P.getClientRects()[0].width;H.addEventListener("input",()=>W(X),!1);k.addEventListener("pointerout",()=>C(),!1);W(X);window.addEventListener("resize",()=>C(),!1);function G(){g=parseInt(I.value),C()}I.addEventListener("mousemove",G,!1);I.addEventListener("change",G,!1);document.getElementById("close").addEventListener("click",()=>{B.classList.remove("visible")},!1);document.getElementById("dont-show").addEventListener("click",()=>{B.classList.remove("visible"),window.localStorage.setItem("dont-show-howto","true")},!1);document.getElementById("show-howto").addEventListener("click",()=>{B.classList.add("visible"),window.localStorage.removeItem("dont-show-howto")},!1);window.localStorage.getItem("dont-show-howto")||B.classList.add("visible");document.addEventListener("keyup",e=>{e.key=="Escape"&&B.classList.remove("visible")},!1);function T(){g=0,I.value="0",C()}function U(){g=Math.max(0,g-1),I.value=g.toString(),C()}function Z(){g=Math.min(E.length-1,g+1),I.value=g.toString(),C()}function V(){g=E.length-1,I.value=g.toString(),C()}function b(e,t){(t.key=="Enter"||t.key==" ")&&e()}document.getElementById("to-start").addEventListener("click",T,!1);document.getElementById("to-start").addEventListener("keypress",b.bind(null,T),!1);document.getElementById("step-back").addEventListener("click",U,!1);document.getElementById("step-back").addEventListener("keypress",b.bind(null,U),!1);document.getElementById("step-forward").addEventListener("click",Z,!1);document.getElementById("step-forward").addEventListener("keypress",b.bind(null,Z),!1);document.getElementById("to-end").addEventListener("click",V,!1);document.getElementById("to-end").addEventListener("keypress",b.bind(null,V),!1);

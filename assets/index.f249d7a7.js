import{u as z}from"./vendor.2fabef96.js";const V=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}};V();const R={7:"'\\a'",8:"'\\b'",9:"'\\t'",10:"'\\n'",11:"'\\v'",12:"'\\f'",13:"'\\r'",39:"'\\''",92:"'\\\\'"};function Y(A){return R.hasOwnProperty(A)?R[A]:32<=A&&A<=126?`'${String.fromCharCode(A)}'`:A<16?`0x0${A.toString(16)}`:`0x${A.toString(16)}`}var d={fonts:{ui:'"IBM Plex Sans", sans-serif',mono:'"Ubuntu Mono", monospace'},colors:{fg:"black",bg:"white",blue:"#4060ff",blue50:"#0000ff80",blue25:"#0000ff40",blue25Opaque:"#c0c0ff",tr:"white",trHover:"#d0d0d0",trZebra:"#e0e0e0",trZebraHover:"#b0b0b0",modalCover:"#00000080",lightGray:"#e0e0e0",buttonBottom:"#00000080",buttonHover:"#00000020",buttonActive:"#00000040"}};function _(A){const e=z.encode(A),t=new Map;t.set(0,1),t.set(255,1);for(let o=0;o<e.length;o+=1){const n=e.charCodeAt(o);t.has(n)?t.set(n,t.get(n)+1):t.set(n,1)}return t}function AA(A,e,t,o){e.replaceChildren();const n=[...A.keys()].sort((i,s)=>A.get(s)-A.get(i));for(const i of n){const s=document.createElement("tr"),r=document.createElement("td"),g=document.createElement("td");s.appendChild(r),s.appendChild(g),r.textContent=Y(i),g.textContent=A.get(i).toString();const l=A.get(i)/A.get(n[0]);g.style.boxShadow=`-${l*t}px 0 ${d.colors.blue25} inset`,e.appendChild(s),o&&s.addEventListener("pointerover",()=>o(i),!1)}}var eA=async(A={},e)=>{let t;if(e.startsWith("data:")){const o=atob(e.replace(/^data:.*?base64,/,"")),n=new Uint8Array(o.length);for(let i=0;i<o.length;i++)n[i]=o.charCodeAt(i);t=await WebAssembly.instantiate(n,A)}else{const o=await fetch(e),n=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&n.startsWith("application/wasm"))t=await WebAssembly.instantiateStreaming(o,A);else{const i=await o.arrayBuffer();t=await WebAssembly.instantiate(i,A)}}return t.instance.exports},tA=A=>eA(A,"data:application/wasm;base64,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CCADQQJ0aiICKAIAKAIMIgAgAkF8aigCACgCDCICRg0AIAAgAkkNAQsgAyEBCyABCwu8CAIAQYCABAugCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAAAAAAIAQBAAAEAQAAAAAAAAAAAABBoIgECwwAAAAALAQBAAAAAQA=");function D(A,e){const t=new Uint32Array(A,e,4),o=t[0]?D(A,t[0]):void 0,n=t[1]?D(A,t[1]):void 0,i=t[2]&255,s=t[3];return{left:o,right:n,symbol:i,frequency:s}}const E=56,p=40;async function nA(A){var i;const e=[],t=await tA({env:{saveTreeSnapshot(s,r){const g=new Uint32Array(t.memory.buffer,s,r),l=[];for(let I=0;I<r;I+=1)l.push(D(t.memory.buffer,g[I]));e.push(l)}}}),o=t.histogram.value,n=new Uint32Array(t.memory.buffer,o,256);for(let s=0;s<256;s+=1)n[s]=(i=A.get(s))!=null?i:0;return t.buildTree(o),e}function u(A){return A.left&&A.right?1+Math.max(u(A.left),u(A.right)):A.left?1+u(A.left):A.right?1+u(A.right):1}function F(A){let e=.5;for(const t in A){const o=A[t],n=2**(-t-2);o==0?e-=n:e+=n}return e}function*v(A,e=[]){A.left&&(yield*v(A.left,[...e,0])),A.right&&(yield*v(A.right,[...e,1])),yield[A,e]}function K(A,e,t){return[F(A)*(e-E-6)+E/2+3,A.length*t+p/2+3]}var q;(function(A){A[A.None=0]="None",A[A.Normal=1]="Normal",A[A.Highlighted=2]="Highlighted"})(q||(q={}));function P(A,e,t,o,n,i=1,s=!1){const[r,g]=K(t,n,o);if(t.length>0&&i!=0){const l=t.slice(0,-1),[I,m]=K(l,n,o);A.beginPath(),[A.strokeStyle,A.lineWidth]=i==2?[d.colors.blue,3]:[d.colors.fg,1],A.moveTo(I,m),A.lineTo(r,g),A.stroke(),A.closePath()}A.beginPath(),[A.fillStyle,A.strokeStyle,A.lineWidth]=s?[d.colors.blue25Opaque,d.colors.blue,3]:[d.colors.bg,d.colors.fg,1],A.rect(r-E/2,g-p/2,E,p),A.fill(),A.stroke(),A.closePath(),A.fillStyle=d.colors.fg,A.font=`16px ${d.fonts.mono}`,A.textBaseline="middle",A.textAlign="center",e.left||e.right?A.fillText(e.frequency.toString(),r,g):(A.fillText(Y(e.symbol),r,g-8),A.fillText(e.frequency.toString(),r,g+8))}function iA(A,e){for(const[{symbol:t},o]of v(A))if(t==e)return o}function oA(A,e,t){const o=A.canvas.width/window.devicePixelRatio,n=A.canvas.height/window.devicePixelRatio,i=Math.min((n-p-6)/(u(e)-1),80);let s,r;const g=typeof t=="number"?iA(e,t):void 0;let l=1/0,I=-1/0;for(const[Q,w]of v(e)){Q.symbol==t&&!Q.left&&!Q.right&&(s=Q,r=w);const x=g?w.every(($,j)=>g[j]==$):!1;P(A,Q,w,i,o,x?2:1);const y=F(w);y<l&&(l=y),y>I&&(I=y)}s&&r&&P(A,s,r,i,o,0,!0),l*=o,I*=o;let m=l-E/2-3,k=0,N=I-l+E+6,J=n;return m*=window.devicePixelRatio,k*=window.devicePixelRatio,N*=window.devicePixelRatio,J*=window.devicePixelRatio,{image:A.getImageData(m,k,N,J),rootFrequency:e.frequency}}function sA(A,e,t){const o=e.map(s=>(A.resetTransform(),A.clearRect(0,0,A.canvas.width,A.canvas.height),A.scale(window.devicePixelRatio,window.devicePixelRatio),oA(A,s,t))).sort((s,r)=>s.rootFrequency-r.rootFrequency),n=o.reduce((s,r)=>s+r.image.width,0);A.canvas.width=n,A.canvas.style.width=`${n/window.devicePixelRatio}px`,A.resetTransform(),A.clearRect(0,0,A.canvas.width,A.canvas.height);let i=0;for(const{image:s}of o)A.putImageData(s,i,0),i+=s.width}const H=document.getElementById("input"),S=document.getElementById("histogram"),f=document.getElementById("huffman"),rA=f.getContext("2d"),C=document.getElementById("scrubber"),h=document.getElementById("howto-container");let B,a=0;function c(A){const e=f.parentElement.clientWidth,t=f.parentElement.clientHeight;f.width=e*window.devicePixelRatio,f.height=t*window.devicePixelRatio,f.style.width=`${e}px`,f.style.height=`${t}px`,B&&sA(rA,B[a],A)}async function M(A){const e=_(H.value);AA(e,S,A,t=>c(t)),B=await nA(e),a=B.length-1,C.max=a.toString(),C.value=a.toString(),c()}const L=document.createElement("tr"),T=document.createElement("td"),gA=document.createElement("td");L.appendChild(T);L.appendChild(gA);S.appendChild(L);const G=T.getClientRects()[0].width;H.addEventListener("input",()=>M(G),!1);S.addEventListener("pointerout",()=>c(),!1);M(G);window.addEventListener("resize",()=>c(),!1);function W(){a=parseInt(C.value),c()}C.addEventListener("mousemove",W,!1);C.addEventListener("change",W,!1);document.getElementById("close").addEventListener("click",()=>{h.classList.remove("visible")},!1);document.getElementById("dont-show").addEventListener("click",()=>{h.classList.remove("visible"),window.localStorage.setItem("dont-show-howto","true")},!1);document.getElementById("show-howto").addEventListener("click",()=>{h.classList.add("visible"),window.localStorage.removeItem("dont-show-howto")},!1);window.localStorage.getItem("dont-show-howto")||h.classList.add("visible");document.addEventListener("keyup",A=>{A.key=="Escape"&&h.classList.remove("visible")},!1);function O(){a=0,C.value="0",c()}function U(){a=Math.max(0,a-1),C.value=a.toString(),c()}function X(){a=Math.min(B.length-1,a+1),C.value=a.toString(),c()}function Z(){a=B.length-1,C.value=a.toString(),c()}function b(A,e){(e.key=="Enter"||e.key==" ")&&A()}document.getElementById("to-start").addEventListener("click",O,!1);document.getElementById("to-start").addEventListener("keypress",b.bind(null,O),!1);document.getElementById("step-back").addEventListener("click",U,!1);document.getElementById("step-back").addEventListener("keypress",b.bind(null,U),!1);document.getElementById("step-forward").addEventListener("click",X,!1);document.getElementById("step-forward").addEventListener("keypress",b.bind(null,X),!1);document.getElementById("to-end").addEventListener("click",Z,!1);document.getElementById("to-end").addEventListener("keypress",b.bind(null,Z),!1);
